<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>

<BorderPane prefHeight="800" prefWidth="1200" style="-fx-background-color: #f0f2f5;" stylesheets="@../css/modern.css" xmlns="http://javafx.com/javafx/17.0.12" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.prison.controller.GuardProfileController">

    <top>
        <VBox style="-fx-background-color: white; -fx-border-color: #d1d9e6; -fx-border-width: 0 0 2 0; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.15), 10, 0, 0, 2);">
            <padding>
                <Insets bottom="25" left="30" right="30" top="25" />
            </padding>
            <Label fx:id="profileModeLabel"
                   style="-fx-text-fill: #5e72e4; -fx-font-size: 13; -fx-font-weight: 800; -fx-letter-spacing: 2;"
                   text="PERSONNEL MANAGEMENT" />
            <Label fx:id="profileTitleLabel"
                   style="-fx-font-size: 32; -fx-font-weight: 900; -fx-text-fill: #172b4d; -fx-padding: 5 0 0 0;"
                   text="Guard Profile" />
        </VBox>
    </top>

    <center>
        <ScrollPane fx:id="mainScrollPane" fitToWidth="true" hbarPolicy="NEVER" vbarPolicy="AS_NEEDED"
                    style="-fx-background-color: transparent; -fx-background: transparent; -fx-focus-color: transparent;"
                    pannable="true">
            <content>
                <HBox alignment="TOP_CENTER" spacing="30" style="-fx-padding: 40 30 40 30;">

                    <!-- ═══ LEFT: PHOTO + STATUS CARD ════════════════════════════ -->
                    <VBox alignment="CENTER" maxHeight="420" spacing="20"
                          style="-fx-background-color: white;
                                 -fx-background-radius: 15;
                                 -fx-border-color: #cad1d7;
                                 -fx-border-width: 2;
                                 -fx-border-radius: 15;
                                 -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 20, 0, 0, 5);">
                        <padding>
                            <Insets bottom="30" left="30" right="30" top="30" />
                        </padding>

                        <VBox alignment="CENTER" spacing="8">
                            <Label style="-fx-text-fill: #172b4d; -fx-font-weight: 800; -fx-font-size: 16;"
                                   text="Profile Photo" />
                            <Label style="-fx-text-fill: #8898aa; -fx-font-size: 12; -fx-font-weight: 600;"
                                   text="High resolution recommended" />
                        </VBox>

                        <StackPane style="-fx-background-color: #f4f5f7;
                                          -fx-border-color: #adb5bd;
                                          -fx-border-width: 3;
                                          -fx-border-style: dashed;
                                          -fx-background-radius: 10;
                                          -fx-border-radius: 10;">
                            <padding>
                                <Insets bottom="15" left="15" right="15" top="15" />
                            </padding>
                            <ImageView fx:id="guardImage" fitHeight="220" fitWidth="200" preserveRatio="true" />
                        </StackPane>

                        <!--
                            fx:id="photoButton" lets the controller rename this
                            "Change Photo" → "Add Photo" when in new-guard mode.
                        -->
                        <Button fx:id="photoButton"
                                onAction="#uploadPhoto"
                                style="-fx-background-color: #5e72e4;
                                       -fx-text-fill: white;
                                       -fx-font-weight: 700;
                                       -fx-font-size: 14;
                                       -fx-padding: 12 25;
                                       -fx-background-radius: 8;
                                       -fx-cursor: hand;"
                                text="Change Photo" />

                        <VBox alignment="CENTER" spacing="5">
                            <Label style="-fx-text-fill: #8898aa; -fx-font-size: 11; -fx-font-weight: 700;"
                                   text="CURRENT STATUS" />
                            <Label fx:id="statusBadge" text="ACTIVE" />
                        </VBox>
                    </VBox>

                    <!-- ═══ RIGHT: FORM CARD ══════════════════════════════════════ -->
                    <VBox maxWidth="800" spacing="20"
                          style="-fx-background-color: white;
                                 -fx-background-radius: 15;
                                 -fx-border-color: #cad1d7;
                                 -fx-border-width: 2;
                                 -fx-border-radius: 15;
                                 -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 20, 0, 0, 5);"
                          HBox.hgrow="ALWAYS">
                        <padding>
                            <Insets bottom="35" left="35" right="35" top="35" />
                        </padding>

                        <!-- Section heading -->
                        <VBox spacing="8">
                            <Label style="-fx-text-fill: #172b4d; -fx-font-weight: 800; -fx-font-size: 20;"
                                   text="Personal Details" />
                            <Separator style="-fx-background-color: #5e72e4; -fx-pref-height: 3;" />
                        </VBox>

                        <HBox spacing="20">
                            <VBox spacing="8" HBox.hgrow="ALWAYS">
                                <Label style="-fx-text-fill: #525f7f; -fx-font-size: 13; -fx-font-weight: 700;" text="Full Name" />
                                <TextField fx:id="nameField"
                                           style="-fx-background-color: #ffffff; -fx-border-color: #cad1d7; -fx-border-width: 2; -fx-border-radius: 8; -fx-padding: 12;" />
                            </VBox>
                            <VBox prefWidth="120" spacing="8">
                                <Label style="-fx-text-fill: #525f7f; -fx-font-size: 13; -fx-font-weight: 700;" text="Age" />
                                <TextField fx:id="ageField"
                                           style="-fx-background-color: #ffffff; -fx-border-color: #cad1d7; -fx-border-width: 2; -fx-border-radius: 8; -fx-padding: 12;" />
                            </VBox>
                        </HBox>

                        <HBox spacing="20">
                            <VBox spacing="8" HBox.hgrow="ALWAYS">
                                <Label style="-fx-text-fill: #525f7f; -fx-font-size: 13; -fx-font-weight: 700;" text="Role / Designation" />
                                <ComboBox fx:id="designationBox" maxWidth="Infinity"
                                          style="-fx-background-color: #ffffff; -fx-border-color: #cad1d7; -fx-border-width: 2; -fx-border-radius: 8; -fx-padding: 8;" />
                            </VBox>
                            <VBox spacing="8" HBox.hgrow="ALWAYS">
                                <Label style="-fx-text-fill: #525f7f; -fx-font-size: 13; -fx-font-weight: 700;" text="Gender" />
                                <ComboBox fx:id="genderBox" maxWidth="Infinity"
                                          style="-fx-background-color: #ffffff; -fx-border-color: #cad1d7; -fx-border-width: 2; -fx-border-radius: 8; -fx-padding: 8;" />
                            </VBox>
                        </HBox>

                        <HBox spacing="20">
                            <VBox spacing="8" HBox.hgrow="ALWAYS">
                                <Label style="-fx-text-fill: #525f7f; -fx-font-size: 13; -fx-font-weight: 700;" text="Shift Assignment" />
                                <ComboBox fx:id="shiftBox" maxWidth="Infinity"
                                          style="-fx-background-color: #ffffff; -fx-border-color: #cad1d7; -fx-border-width: 2; -fx-border-radius: 8; -fx-padding: 8;" />
                            </VBox>
                            <VBox spacing="8" HBox.hgrow="ALWAYS">
                                <Label style="-fx-text-fill: #525f7f; -fx-font-size: 13; -fx-font-weight: 700;" text="Birth Date" />
                                <DatePicker fx:id="birthDatePicker" editable="true" maxWidth="Infinity"
                                            style="-fx-background-color: #ffffff; -fx-border-color: #cad1d7; -fx-border-width: 2; -fx-border-radius: 8; -fx-padding: 8;" />
                            </VBox>
                        </HBox>

                        <HBox spacing="20">
                            <VBox spacing="8" HBox.hgrow="ALWAYS">
                                <Label style="-fx-text-fill: #525f7f; -fx-font-size: 13; -fx-font-weight: 700;" text="Batch ID / Badge No." />
                                <TextField fx:id="batchIdField"
                                           style="-fx-background-color: #ffffff; -fx-border-color: #cad1d7; -fx-border-width: 2; -fx-border-radius: 8; -fx-padding: 12;" />
                            </VBox>
                            <VBox spacing="8" HBox.hgrow="ALWAYS">
                                <Label style="-fx-text-fill: #525f7f; -fx-font-size: 13; -fx-font-weight: 700;" text="Aadhar Number" />
                                <TextField fx:id="aadharField"
                                           style="-fx-background-color: #ffffff; -fx-border-color: #cad1d7; -fx-border-width: 2; -fx-border-radius: 8; -fx-padding: 12;" />
                            </VBox>
                        </HBox>

                        <HBox spacing="20">
                            <VBox spacing="8" HBox.hgrow="ALWAYS">
                                <Label style="-fx-text-fill: #525f7f; -fx-font-size: 13; -fx-font-weight: 700;" text="Phone Number" />
                                <TextField fx:id="phoneField"
                                           style="-fx-background-color: #ffffff; -fx-border-color: #cad1d7; -fx-border-width: 2; -fx-border-radius: 8; -fx-padding: 12;" />
                            </VBox>
                            <VBox spacing="8" HBox.hgrow="ALWAYS">
                                <Label style="-fx-text-fill: #525f7f; -fx-font-size: 13; -fx-font-weight: 700;" text="Email Address" />
                                <TextField fx:id="emailField"
                                           style="-fx-background-color: #ffffff; -fx-border-color: #cad1d7; -fx-border-width: 2; -fx-border-radius: 8; -fx-padding: 12;" />
                            </VBox>
                        </HBox>

                        <VBox spacing="8">
                            <Label style="-fx-text-fill: #525f7f; -fx-font-size: 13; -fx-font-weight: 700;" text="Residential Address" />
                            <TextField fx:id="addressField"
                                       style="-fx-background-color: #ffffff; -fx-border-color: #cad1d7; -fx-border-width: 2; -fx-border-radius: 8; -fx-padding: 12;" />
                        </VBox>

                        <HBox spacing="20">
                            <VBox spacing="8" HBox.hgrow="ALWAYS">
                                <Label style="-fx-text-fill: #525f7f; -fx-font-size: 13; -fx-font-weight: 700;" text="Transfer From" />
                                <TextField fx:id="transferField"
                                           style="-fx-background-color: #ffffff; -fx-border-color: #cad1d7; -fx-border-width: 2; -fx-border-radius: 8; -fx-padding: 12;" />
                            </VBox>
                            <VBox spacing="8" HBox.hgrow="ALWAYS">
                                <Label style="-fx-text-fill: #525f7f; -fx-font-size: 13; -fx-font-weight: 700;" text="Salary (Monthly)" />
                                <TextField fx:id="salaryField" editable="false"
                                           style="-fx-background-color: #e9ecef; -fx-border-color: #cad1d7; -fx-border-width: 2; -fx-border-radius: 8; -fx-padding: 12; -fx-font-weight: 800;" />
                            </VBox>
                            <VBox spacing="8" HBox.hgrow="ALWAYS">
                                <Label style="-fx-text-fill: #525f7f; -fx-font-size: 13; -fx-font-weight: 700;" text="Joining Date" />
                                <DatePicker fx:id="joiningDatePicker" editable="true" maxWidth="Infinity"
                                            style="-fx-background-color: #ffffff; -fx-border-color: #cad1d7; -fx-border-width: 2; -fx-border-radius: 8; -fx-padding: 8;" />
                            </VBox>
                        </HBox>

                        <VBox spacing="8">
                            <Label style="-fx-text-fill: #525f7f; -fx-font-size: 13; -fx-font-weight: 700;" text="Internal Remarks" />
                            <TextArea fx:id="descriptionArea" prefHeight="100"
                                      style="-fx-border-color: #cad1d7; -fx-border-width: 2; -fx-border-radius: 8;"
                                      wrapText="true" />
                        </VBox>

                        <!-- Action buttons -->
                        <HBox alignment="CENTER_RIGHT" spacing="15" style="-fx-padding: 20 0 0 0;">
                            <!-- Print buttons hidden for new-guard mode via controller -->
                            <Button fx:id="printInfoBtn"
                                    onAction="#handlePrint"
                                    prefWidth="150"
                                    style="-fx-background-color: #11cdef; -fx-text-fill: white; -fx-font-weight: 800; -fx-padding: 15; -fx-background-radius: 10;"
                                    text="PRINT INFO" />
                            <Button fx:id="paySlipBtn"
                                    onAction="#handlePrintPaySlip"
                                    prefWidth="150"
                                    style="-fx-background-color: #2dce89; -fx-text-fill: white; -fx-font-weight: 800; -fx-padding: 15; -fx-background-radius: 10;"
                                    text="PAY SLIP" />
                            <Button fx:id="saveBtn"
                                    onAction="#updateGuard"
                                    prefWidth="220"
                                    style="-fx-background-color: #5e72e4; -fx-text-fill: white; -fx-font-weight: 800; -fx-padding: 15; -fx-background-radius: 10;"
                                    text="SAVE PROFILE" />
                        </HBox>
                    </VBox>

                </HBox>
            </content>
        </ScrollPane>
    </center>
</BorderPane>
